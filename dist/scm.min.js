/*! scm 2016-08-14 */
var SC={};SC.Store=function(a,b){"use strict";function c(a,b){var c=a[b];return c||(c=[],a[b]=c),c}function d(a){var b;for(b=0;b<a.length;b++)if(a[b].isDefault)return!0;return!1}function e(a,b){var c=a[b];return c?c.map(function(a){return a.handler}):null}function f(b,d,e,f){var g,h,i=c(b,e),j=i.length;if(d===a.scdefault)i.length=0;else for(g=j-1;g>=0;g--)h=i[g],h.context===d&&h.handler===f&&i.splice(g,1),f||h.context!==d||i.splice(g,1)}function g(b,c){var d,e,f,g=c===a.scdefault;for(e in b)if(b.hasOwnProperty(e)){for(f=b[e],d=f.length-1;d>=0;d--)(f[d].context===c||g)&&f.splice(d,1);0===f.length&&delete b[e]}}function h(a,b,c){this.isDefault=c||!1,this.context=a,this.handler=b}function i(){this.store={}}return b=i.prototype,b.save=function(a,b,e,f){var g=this.store,i=c(g,a),j=d(i),k=new h(b,e,f);if(f){if(j)throw"ShortcutManager: Can not add another default handler for shortcut "+a+".";i.unshift(k)}else i.push(k)},b.get=function(a){return e(this.store,a)},b.remove=function(a,b,c){var d=this.store;void 0!==b&&null!==b?f(d,a,b,c):g(d,a)},i}(SC),SC.Normalizer=function(a,b){"use strict";function c(a){return h[a]}function d(a){var b=i[a];return b?b:String.fromCharCode(a).toLowerCase()}function e(a){return Boolean(j[a])}function f(){}var g="+",h={ctrl:0,alt:1,shift:2},i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",107:"+",109:"-",187:"+",189:"-"},j={187:"+"};return b=f.prototype,b.fromEvent=function(a){var b,c=!e(a.keyCode);return b=a.ctrlKey?"ctrl+":"",b+=a.altKey?"alt+":"",b+=a.shiftKey&&c?"shift+":"",b+=d(a.keyCode)},b.normalize=function(a){var b,d,e,f=[],h=[];if(void 0===a||null===a)return a;if(a===g)return g;for(b=a.toLowerCase().split(g),d=0;d<b.length;d++)e=c(b[d]),void 0!==e?f[e]=b[d]:h.push(b[d]);return f=f.concat(h),f=f.filter(function(a){return a}),f.join(g)},f}(SC),SC.Manager=function(a,b){"use strict";function c(b){this.context=a.scdefault,this.isStatic=b||!1}var d=new a.Store,e=new a.Normalizer;return a.scdefault=window,b=c.prototype,b.create=function(b){return(new a.Manager)["in"](b)},b["in"]=function(a){if(this.isStatic)throw"ShortcutManager: Can not change context on static method. Use ShortcutManager.create() with right context.";return this.context=a,this},b.on=function(a,b,c){var f=e.normalize(a);d.save(f,this.context,b,c)},b.normalizeFromEvent=function(a){return e.fromEvent(a)},b.normalize=function(a){return e.normalize(a)},b.remove=function(a,b){d.remove(this.context,e.normalize(a),b)},b.handleByKeyEvent=function(a){var b,c,f=e.fromEvent(a);if(f&&(b=d.get(f)))for(c=b.length-1;c>=0;c--)if(b[c]())return!0;return!1},b.destroy=function(){this.remove()},c}(SC);var ShortcutManager=new SC.Manager(!0);